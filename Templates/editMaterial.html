{% extends "base.html" %}
{% block title %} Edit Material {% endblock %}
{% block button %} {% endblock %}
{% block corousal %} {% endblock %}

{% block body %}
<link rel="stylesheet" href="/static/assets/css/image.css" />

<header class="bg-white shadow">
  <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <h1 class="text-4xl font-bold text-gray-900">
      Edit Material
    </h1>
  </div>
</header>
<div class="formsCustom">
  <form method="POST" action="/editMaterial/{{data.0.id}}" enctype="multipart/form-data">{% csrf_token %}
    <div class="formsFlex">
      <div class="formleft">
        <div class="formsContent">
          <lable>Category</lable>
          <div class="input">
            {{ form.category }}
          </div>
          <div class="text-error">{{ form.category.errors }}</div>
        </div>
        <div class="formsContent">
          <lable>Item</lable>
          <div class="input">
            {{ form.item }}
          </div>
          <div class="text-error">{{ form.item.errors }}</div>
        </div>

        <div class="formsContent">
          <lable>Brand Name</lable>
          <div class="input">
            {{ form.title }}
          </div>
          <div class="text-error">{{ form.title.errors }}</div>
        </div>
        <div class="formsContent">
          <lable>Address</lable>
          <div class="input">
            {{ form.address }}
          </div>
          <div class="text-error">{{ form.address.errors }}</div>
        </div>

        <div class="formsContent">
            <lable>Description</lable>
            <div class="input">
              {{ form.description }}
            </div>
            <div class="text-error">{{ form.description.errors }}</div>
          </div>
      </div>

      <div class="formRight">
        <div class="formsContent">
          <lable>Quantity</lable>
          <div class="input">
            {{ form.quantity }}
          </div>
          <div class="text-error">{{ form.quantity.errors }}</div>
        </div>
        <div class="formsContent">
          <lable>Weight/Size</lable>
          <div class="input">
            {{ form.weight }}
          </div>
          <div class="text-error">{{ form.weight.errors }}</div>
        </div>

        <div class="formsContent">
          <lable>Currency</lable>
          <div class="input">
            {{ form.currency }}
          </div>
          <div class="text-error">{{ form.currency.errors }}</div>
        </div>
        <div class="formsContent">
          <lable>Unit Price</lable>
          <div class="input">
            {{ form.price }}
          </div>
          <div class="text-error">{{ form.price.errors }}</div>
        </div>

      </div>
    </div>





    <!-- Upload Area -->
    <div style="margin-left: 21px; margin-top:35px;">
      <lable>Featured Image</lable><span class="dim-size" style="font-size: 12px; margin-left: 8px;">Supported Formats
        JPG, JPEG, PNG 600 X 400 PX (Max 10 MB)</span>
    </div>
    <div class="image" id="image1">
      <div class="imageView"
        style="display:flex; justify-content:center; align-items: center; width: 193px; height:150px; border: 1px solid black; border-radius: 5px;">
        <div id="dropZoon0" class="upload-area__drop-zoon drop-zoon">
          <span class="drop-zoon__icon">
            <i class='bx bxs-file-image'></i>
          </span>
          <p class="drop-zoon__paragraph" id="para0">Drop your file here or Click to browse</p>
          <span id="loadingText" class="drop-zoon__loading-text">Please Wait</span>
          <img src="" alt="Preview Image" id="previewImage0" draggable="false">
          <input type="file" name="image" class="validation" accept="image/*" id="id_image">

        </div>

      </div>
      <div class="text-error">{{ form.image.errors }}</div>
    </div>


    <div style="margin-left: 21px; margin-top:35px;">
      <lable>Images</lable><span class="dim-size" style="font-size: 12px; margin-left: 8px;">Supported Formats JPG,
        JPEG, PNG 600 X 400 PX (Max 10 MB)</span>
    </div>
    <div class="image" id="image">
      <div class="imageView"
        style="display:flex; justify-content:center; align-items: center; width: 193px; height:150px; border: 1px solid black; border-radius: 5px;">
        <div id="dropZoon1" class="upload-area__drop-zoon drop-zoon">
          <span class="drop-zoon__icon">
            <i class='bx bxs-file-image'></i>
          </span>
          <p class="drop-zoon__paragraph" id="para1">Drop your file here or Click to browse</p>
          <span id="loadingText" class="drop-zoon__loading-text">Please Wait</span>
          <img src="" alt="Preview Image" id="previewImage1" draggable="false">
          <input type="file" name="image1" multiple class="validation" accept="image/*" id="id_image1">

        </div>
        <div class="text-error">{{ form.image1.errors }}</div>

      </div>
      
    </div>

    <button class="btn btn-primary" style="margin-top: 15px; margin-left: 12px; height:4rem ;" type="submit">Update
      Material</button>
  </form>

</div>

{% block footer %} {% endblock %}
<script>
  let ab = document.getElementById("popup");
  if (ab) {
    setTimeout(() => {
      ab.remove();
    }, 2000);
  }

//custom implementaions for material edit
const category = document.getElementById("id_category");
const brand = document.getElementById("id_item");
brand.value = "{{ data.0.Item }}";
const name= document.getElementById("id_title");
name.value = "{{ data.0.Title }}";
const descs = document.getElementById("id_description");
descs.value = "{{ data.0.Description }}";
const addresses = document.getElementById("id_address");
addresses.value = "{{ data.0.Address }}";
const quantity = document.getElementById("id_quantity");
quantity.value = "{{ data.0.Quantity }}"
const weights =document.getElementById("id_weight");
const currencys= document.getElementById("id_currency");
const prices = document.getElementById("id_price");
prices.value = "{{ data.0.Price }}";



const div = document.getElementById("image1");

let parentElement = document.createElement("div");
parentElement.classList.add("imageView");
let element = document.createElement("img");
element.setAttribute("src", "/Files/"+"{{ data.0.image1}}");
parentElement.appendChild(element);
div.appendChild(parentElement);

const div1 = document.getElementById("image");
const imageData = "{{imageData}}"
const mainData4 = imageData.split(",");

mainData4.forEach(function(elements){
    const replaced = elements.replace(/\[?&#x27;\]?/g,"");
    const final = replaced.trim();
    let parentElement1 = document.createElement("div");
    parentElement1.classList.add("imageView");
    let element1 = document.createElement("img");
    element1.setAttribute("src", "/Files/"+final);
    parentElement1.appendChild(element1);
    div1.appendChild(parentElement1);
})
  </script>

<script src="/static/assets/js/image.js" type="text/javascript"></script>
{% endblock %}